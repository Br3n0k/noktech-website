---
import { getLanguageFromURL, useTranslations } from '../i18n/utils';
import FooterIcon from './icons/FooterIcon.astro';

const currentPath = Astro.url.pathname;
const lang = getLanguageFromURL(currentPath);
const t = useTranslations(lang);

const socialLinks = [
  {
    name: t('contact.info.social.linkedin'),
    url: 'https://linkedin.com/in/brendown-ferreira',
    icon: 'linkedin'
  },
  {
    name: t('contact.info.social.instagram'),
    url: 'https://www.instagram.com/nok.dev',
    icon: 'instagram'
  },
  {
    name: t('contact.info.social.github'),
    url: 'https://github.com/br3n0k',
    icon: 'github'
  }
];
---

<section id="contact" class="relative py-20 overflow-hidden">
  <!-- Grid Pattern Background -->
  <div class="absolute inset-0 bg-grid-pattern opacity-[0.03]"></div>

  <!-- Gradient Orbs -->
  <div class="absolute -top-40 -right-40 w-80 h-80 bg-primary/30 rounded-full filter blur-3xl opacity-20"></div>
  <div class="absolute -bottom-40 -left-40 w-80 h-80 bg-primary/30 rounded-full filter blur-3xl opacity-20"></div>

  <div class="container mx-auto px-4 relative z-10">
    <div class="text-center mb-12">
      <span class="text-primary font-medium">{t('contact.label')}</span>
      <h2 class="text-4xl font-bold mt-2">{t('contact.heading')}</h2>
      <p class="text-gray-400 mt-4 max-w-2xl mx-auto">{t('contact.subheading')}</p>
    </div>

    <div class="grid lg:grid-cols-2 gap-12 items-start max-w-6xl mx-auto">
      <!-- Informações de Contato -->
      <div class="bg-dark-lighter p-8 rounded-2xl border border-dark-border space-y-8">
        <h3 class="text-2xl font-semibold">{t('contact.info.title')}</h3>
        
        <div class="space-y-6">
          <!-- Email -->
          <div class="flex items-center space-x-4 group">
            <div class="w-12 h-12 rounded-lg bg-dark border border-dark-border flex items-center justify-center group-hover:border-primary/50 transition-colors">
              <FooterIcon name="email" class="w-6 h-6 text-primary group-hover:text-primary-light transition-colors" />
            </div>
            <div>
              <span class="text-gray-400 text-sm">{t('contact.info.email.label')}</span>
              <a 
                href="mailto:br3n0k@gmail.com"
                class="block text-white hover:text-primary transition-colors font-medium"
              >
                {t('contact.info.email.value')}
              </a>
            </div>
          </div>

          <!-- WhatsApp -->
          <div class="flex items-center space-x-4 group">
            <div class="w-12 h-12 rounded-lg bg-dark border border-dark-border flex items-center justify-center group-hover:border-primary/50 transition-colors">
              <FooterIcon name="whatsapp" class="w-6 h-6 text-primary group-hover:text-primary-light transition-colors" />
            </div>
            <div>
              <span class="text-gray-400 text-sm">{t('contact.info.whatsapp.label')}</span>
              <a 
                href="https://wa.me/5562991598979"
                target="_blank"
                rel="noopener noreferrer"
                class="block text-white hover:text-primary transition-colors font-medium"
              >
                {t('contact.info.whatsapp.value')}
              </a>
            </div>
          </div>

          <!-- Redes Sociais -->
          <div class="space-y-4">
            <span class="text-gray-400 text-sm block">{t('contact.info.social.label')}</span>
            <div class="flex space-x-4">
              {socialLinks.map(link => (
                <a
                  href={link.url}
                  target="_blank"
                  rel="noopener noreferrer"
                  class="w-12 h-12 rounded-lg bg-dark border border-dark-border flex items-center justify-center hover:border-primary/50 transition-colors group"
                  aria-label={link.name}
                >
                  <FooterIcon name={link.icon} class="w-6 h-6 text-primary group-hover:text-primary-light transition-colors" />
                </a>
              ))}
            </div>
          </div>
        </div>
      </div>

      <!-- Formulário -->
      <form 
        action="https://formsubmit.co/br3n0k@gmail.com" 
        method="POST"
        class="space-y-6 bg-dark-lighter p-8 rounded-2xl border border-dark-border"
      >
        <input type="hidden" name="_next" value="https://noktech.com.br/obrigado">
        <input type="hidden" name="_subject" value="Novo contato pelo site!">
        <input type="hidden" name="_captcha" value="true">
        
        <div>
          <label for="name" class="block text-gray-400 text-sm mb-2">{t('contact.form.name')}</label>
          <input
            type="text"
            id="name"
            name="name"
            required
            placeholder={t('contact.form.namePlaceholder')}
            class="w-full px-4 py-3 bg-dark border border-dark-border rounded-lg focus:outline-none focus:border-primary text-white placeholder-gray-500 transition-colors"
          />
        </div>

        <div>
          <label for="email" class="block text-gray-400 text-sm mb-2">{t('contact.form.email')}</label>
          <input
            type="email"
            id="email"
            name="email"
            required
            placeholder={t('contact.form.emailPlaceholder')}
            class="w-full px-4 py-3 bg-dark border border-dark-border rounded-lg focus:outline-none focus:border-primary text-white placeholder-gray-500 transition-colors"
          />
        </div>

        <div>
          <label for="message" class="block text-gray-400 text-sm mb-2">{t('contact.form.message')}</label>
          <textarea
            id="message"
            name="message"
            required
            rows="4"
            placeholder={t('contact.form.messagePlaceholder')}
            class="w-full px-4 py-3 bg-dark border border-dark-border rounded-lg focus:outline-none focus:border-primary text-white placeholder-gray-500 resize-none transition-colors"
          ></textarea>
        </div>

        <button
          type="submit"
          class="w-full bg-primary hover:bg-primary-dark text-white font-medium py-3 px-6 rounded-lg transition-all duration-300 transform hover:-translate-y-1 hover:shadow-[0_0_20px_rgba(255,0,0,0.3)]"
        >
          {t('contact.form.submit')}
        </button>
      </form>
    </div>
  </div>
</section> 